var documenterSearchIndex = {"docs":
[{"location":"functions/#Functions","page":"Functions","title":"Functions","text":"","category":"section"},{"location":"functions/","page":"Functions","title":"Functions","text":"Alternatively to using the GUI, one has access to all the functions after installing the package.","category":"page"},{"location":"functions/#API-Functions","page":"Functions","title":"API Functions","text":"","category":"section"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.plot_mesh(meshfilename,i_mode)","category":"page"},{"location":"functions/#rtmsim.plot_mesh-Tuple{Any, Any}","page":"Functions","title":"rtmsim.plot_mesh","text":"function plot_mesh(meshfilename,i_mode)\n\nCreate mesh plot with cells with i_mode==1 and create mesh plots with cell center nodes with i_mode==2 for manual selection of inlet ports.\n\nArguments:\n\nmeshfilename :: String\ni_mode :: Int\n\nUnit test:\n\nMODULE_ROOT=splitdir(splitdir(pathof(rtmsim))[1])[1]; meshfilename=joinpath(MODULE_ROOT,\"meshfiles\",\"mesh_permeameter1_foursets.bdf\"); rtmsim.plot_mesh(meshfilename,1);\n\nAdditional unit tests:\n\nMODULE_ROOT=splitdir(splitdir(pathof(rtmsim))[1])[1]; meshfilename=joinpath(MODULE_ROOT,\"meshfiles\",\"mesh_permeameter1_foursets.bdf\"); rtmsim.plot_mesh(meshfilename,2); for the manual selection of inlet ports with left mouse button click while key p is pressed \nMODULE_ROOT=splitdir(splitdir(pathof(rtmsim))[1])[1]; meshfilename=joinpath(MODULE_ROOT,\"meshfiles\",\"mesh_permeameter1_foursets.bdf\"); rtmsim.rtmsim_rev1(1,meshfilename,200, 0.35e5,1.205,1.4,0.06, 0.35e5,0.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 0,0,0,0, 0,\"results.jld2\",1,0.01,16); for starting only with the interactively selected inlet ports\n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.plot_sets(meshfilename)","category":"page"},{"location":"functions/#rtmsim.plot_sets-Tuple{Any}","page":"Functions","title":"rtmsim.plot_sets","text":"function plot_sets(meshfilename)\n\nCreate a plot with the up to four cell sets defined in the mesh file.\n\nUnit test:\n\nMODULE_ROOT=splitdir(splitdir(pathof(rtmsim))[1])[1]; meshfilename=joinpath(MODULE_ROOT,\"meshfiles\",\"mesh_permeameter1_foursets.bdf\"); rtmsim.plot_sets(meshfilename);\n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.read_nastran_mesh(meshfilename,paramset,paramset1,paramset2,paramset3,paramset4,patchtype1val,patchtype2val,patchtype3val,patchtype4val,i_interactive,r_p)","category":"page"},{"location":"functions/#rtmsim.read_nastran_mesh-NTuple{12, Any}","page":"Functions","title":"rtmsim.read_nastran_mesh","text":"function read_nastran_mesh(meshfilename,paramset,paramset1,paramset2,paramset3,paramset4,patchtype1val,patchtype2val,patchtype3val,patchtype4val,i_interactive,r_p)\n\nRead file in Nastran format with fixed length (8 digits), nodes (GRIDS) defined in global coordinate system.\n\nArguments:\n\nmeshfilename :: String\nparamset, paramset1, paramset2, paramset3, paramset3 :: Vector{Float}\npatchtype1val,patchtype1val1,patchtype1val2,patchtype1val3,patchtype1val4 :: Int\ni_interactive :: Int\nr_p :: Float\n\nUnit test:\n\nMODULE_ROOT=splitdir(splitdir(pathof(rtmsim))[1])[1]; meshfilename=joinpath(MODULE_ROOT,\"meshfiles\",\"mesh_permeameter1_foursets.bdf\"); paramset=[0.5,0.3,3e-10,1.0,1.0,0.0,0.0];paramset1=paramset;paramset2=paramset;paramset3=paramset;paramset4=paramset;patchtype1val=-1;patchtype2val=-1;patchtype3val=-1;patchtype4val=-1;i_interactive=0;r_p=0.01; N,cellgridid,gridx,gridy,gridz,cellcenterx,cellcentery,cellcenterz,patchparameters,patchparameters1,patchparameters2,patchparameters3,patchparameters4,patchids1,patchids2,patchids3,patchids4,inletpatchids=rtmsim.read_mesh(meshfilename,paramset,paramset1,paramset2,paramset3,paramset4,patchtype1val,patchtype2val,patchtype3val,patchtype4val,i_interactive,r_p);\n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.start_rtmsim(inputfilename)","category":"page"},{"location":"functions/#rtmsim.start_rtmsim-Tuple{Any}","page":"Functions","title":"rtmsim.start_rtmsim","text":"start_rtmsim(inputfilename)\n\nReads the text input file and calls the solver with the read parameters. \n\nArguments:\n\ninputfilename :: String\n\nThe complete set of input parameters can be accessed in the input file. The following paragraph shows an example for such an input file:\n\n    1    #i_model \n    meshfiles/mesh_permeameter1_foursets.bdf    #meshfilename \n    200    #tmax \n    1.01325e5 1.225 1.4 0.06    #p_ref rho_ref gamma mu_resin_val \n    1.35e5 1.0e5    #p_a_val p_init_val \n    3e-3 0.7 3e-10 1 1 0 0    #t_val porosity_val K_val alpha_val refdir1_val refdir2_val refdir3_val \n    3e-3 0.7 3e-10 1 1 0 0    #t1_val porosity1_val K1_val alpha1_val refdir11_val refdir21_val refdir31_val \n    3e-3 0.7 3e-10 1 1 0 0    #t2_val porosity2_val K2_val alpha2_val refdir12_val refdir22_val refdir32_val\n    3e-3 0.7 3e-10 1 1 0 0    #t3_val porosity3_val K3_val alpha3_val refdir13_val refdir23_val refdir33_val\n    3e-3 0.7 3e-10 1 1 0 0    #t4_val porosity4_val K4_val alpha4_val refdir14_val refdir24_val refdir34_val \n    1 0 0 0    #patchtype1val patchtype2val patchtype3val patchtype4val \n    0 results.jld2    #i_restart restartfilename\n    0 0.01    #i_interactive r_p\n    16    #n_pics\n\nMeaning of the variables:\n\ni_model: Identifier for physical model (Default value is 1)\nmeshfilename: Mesh filename.\ntmax: Maximum simulation time.\np_ref rho_ref gamma mu_resin_val: Parameters for the adiabatic equation of state and dynamic viscosity of resin used in the Darcy term.\np_a_val p_init_val: Absolut pressure value for injection port and for initial cavity pressure.\nt_val porosity_val K_val alpha_val refdir1_val refdir2_val refdir3_val: Properties of the cells in the main preform: The vector (refdir1_val,refdir2_val,refdir3_val) is projected onto the cell in order to define the first principal cell direction. The second principal cell direction is perpendicular to the first one in the plane spanned by the cell nodes. The principal cell directions are used as the principal permeabilty directions. The cell properties are defined by the thickness t_val, the porosity porosity_val, the permeability K_val in the first principal cell direction, the permeablity alpha_val in the second principal direction.\nt1_val porosity1_val K1_val alpha1_val refdir11_val refdir21_val refdir31_val etc.: Properties for up to four additional cell regions if preform. \npatchtype1val patchtype2val patchtype3val patchtype4val: These regions are used to specify the location of the pressure boundary conditions and to specify regions with different permeability, porosity and thickness properties (e.g. for different part thickness and layup or for race tracking which are regions with very high permeability typically at the boundary of the preforms). Vents need not be specified. Parameters patchtype1val define the patch type. Numerical values 0, 1, 2 and 3 are allowed with the following interpretation:\n0 .. the patch is ignored\n1 .. the patch represents an inlet gate, where the specified injection pressure level applies\n2 .. the patch specifies a preform region\n3 .. the patch represents a vent, where the specified initial pressure level applies\ni_restart restartfilename: Start with new simulation if 0 or continue previous simulation if 1 from specified file\ni_interactive r_p: Select the inlet ports graphically if i_interactive equal to 1 and inlet ports have specified radius\nn_pics: Number of intermediate output files, supposed to be a multiple of 4\n\nEntries are separated by one blank.\n\nUnit test:\n\nMODULE_ROOT=splitdir(splitdir(pathof(rtmsim))[1])[1]; inputfilename=joinpath(MODULE_ROOT,\"inputfiles\",\"input.txt\"); rtmsim.start_rtmsim(inputfilename);\n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.rtmsim_rev1(param)","category":"page"},{"location":"functions/#rtmsim.rtmsim_rev1-Tuple{Any}","page":"Functions","title":"rtmsim.rtmsim_rev1","text":"rtmsim_rev1(param)\n\nRTMsim solver with the following main steps:\n\nSimulation initialization\nRead mesh file and prepare patches  \nFind neighbouring cells\nAssign parameters to cells\nCreate local cell coordinate systems\nCalculate initial time step\nArray initialization\nDefine simulation time and intermediate output times\nBoundary conditions\n(Optional initialization if i_model=2,3,..)\nTime evolution (for loops over all indices inside a while loop for time evolution)\nCalculation of correction factors for cell thickness, porosity, permeability, viscosity\nPressure gradient calculation\nNumerical flux function calculation\nUpdate of rho, u, v, gamma and p according to conservation laws and equation of state\nBoundary conditions\nPrepare arrays for next time step\nSaving of intermediate data\n(Opional time marching etc. for i_model=2,3,...)\nCalculation of adaptive time step \n\nData structure param with arguments:\n\ni_model :: Int64 =1\nmeshfilename :: String =\"input.txt\"\ntmax :: Float64 =200\np_ref :: Float64 =1.01325e5\nrho_ref :: Float64 =1.225\ngamma :: Float64 =1.4\nmuresinval :: Float64 =0.06\npaval :: Float64 =1.35e5\npinitval :: Float64 =1.0e5      \nt_val :: Float64 =3e-3\nporosity_val :: Float64 =0.7\nK_val :: Float64 =3e-10\nalpha_val :: Float64 =1.0\nrefdir1_val :: Float64 =1.0\nrefdir2_val :: Float64 =0.0\nrefdir3_val :: Float64 =0.0\nt1_val :: Float64 =3e-3\nporosity1_val :: Float64 =0.7\nK1_val :: Float64 =3e-10\nalpha1_val :: Float64 =1.0\nrefdir11_val :: Float64 =1.0\nrefdir21_val :: Float64 =0.0\nrefdir31_val :: Float64 =0.0\nt2_val :: Float64 =3e-3\nporosity2_val :: Float64 =0.7\nK2_val :: Float64 =3e-10\nalpha2_val :: Float64 =1.0\nrefdir12_val :: Float64 =1.0\nrefdir22_val :: Float64 =0.0\nrefdir32_val :: Float64 =0.0\nt3_val :: Float64 =3e-3\nporosity3_val :: Float64 =0.7\nK3_val :: Float64 =3e-10\nalpha3_val :: Float64 =1.0\nrefdir13_val :: Float64 =0.0\nrefdir23_val :: Float64 =0.0\nrefdir33_val :: Float64 =0.0\nt4_val :: Float64 =3e-3\nporosity4_val :: Float64 =0.7\nK4_val :: Float64 =3e-10\nalpha4_val :: Float64 =1.0\nrefdir14_val :: Float64 =1.0\nrefdir24_val :: Float64 =0.0\nrefdir34_val :: Float64 =0.0\npatchtype1val :: Int64 =1\npatchtype2val :: Int64 =0\npatchtype3val :: Int64 =0\npatchtype4val :: Int64 =0\ni_restart :: Int64 =0\nrestartfilename :: String =\"results.jld2\"\ni_interactive :: Int64 =0\nr_p :: Float64 =0.01\nn_pics :: Int64 =16\n\nMeaning of the variables:\n\ni_model: Identifier for physical model (Default value is 1)\nmeshfilename: Mesh filename.\ntmax: Maximum simulation time.\np_ref rho_ref gamma mu_resin_val: Parameters for the adiabatic equation of state and dynamic viscosity of resin used in the Darcy term.\np_a_val p_init_val: Absolut pressure value for injection port and for initial cavity pressure.\nt_val porosity_val K_val alpha_val refdir1_val refdir2_val refdir3_val: Properties of the cells in the main preform: The vector (refdir1_val,refdir2_val,refdir3_val) is projected onto the cell in order to define the first principal cell direction. The second principal cell direction is perpendicular to the first one in the plane spanned by the cell nodes. The principal cell directions are used as the principal permeabilty directions. The cell properties are defined by the thickness t_val, the porosity porosity_val, the permeability K_val in the first principal cell direction, the permeablity alpha_val in the second principal direction.\nt1_val porosity1_val K1_val alpha1_val refdir11_val refdir21_val refdir31_val etc.: Properties for up to four additional cell regions if preform. \npatchtype1val patchtype2val patchtype3val patchtype4val: These regions are used to specify the location of the pressure boundary conditions and to specify regions with different permeability, porosity and thickness properties (e.g. for different part thickness and layup or for race tracking which are regions with very high permeability typically at the boundary of the preforms). Vents need not be specified. Parameters patchtype1val define the patch type. Numerical values 0, 1, 2 and 3 are allowed with the following interpretation:\n0 .. the patch is ignored\n1 .. the patch represents an inlet gate, where the specified injection pressure level applies\n2 .. the patch specifies a preform region\n3 .. the patch represents a vent, where the specified initial pressure level applies\ni_restart restartfilename: Start with new simulation if 0 or continue previous simulation if 1 from specified file\ni_interactive r_p: Select the inlet ports graphically if i_interactive equal to 1 and inlet ports have specified radius\nn_pics: Number of intermediate output files, supposed to be a multiple of 4\n\nUnit tests:\n\nMODULE_ROOT=splitdir(splitdir(pathof(rtmsim))[1])[1]; meshfilename=joinpath(MODULE_ROOT,\"meshfiles\",\"mesh_permeameter1_foursets.bdf\"); param=rtmsim.input_vals(1,meshfilename,200, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 1,2,2,2,0,\"results.jld2\",0,0.01,16); rtmsim.rtmsim_rev1(param);\n\nAddtional unit tests:\n\nMODULE_ROOT=splitdir(splitdir(pathof(rtmsim))[1])[1]; meshfilename=joinpath(MODULE_ROOT,\"meshfiles\",\"mesh_permeameter1_foursets.bdf\"); param=rtmsim.input_vals(1,meshfilename,200, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 1,0,0,0, 0,\"results.jld2\",0,0.01,16); rtmsim.rtmsim_rev1(param); for starting a simulation with one pressure inlet port (sets 2, 3 and 4 are not used and consequently the preform parameters are ignored; since set 1 is a pressure inlet, also the parameters for set 1 are ignored and the only relevant parameter for the specified set is the pressure difference between injection and initial cavity pressure)\nMODULE_ROOT=splitdir(splitdir(pathof(rtmsim))[1])[1]; meshfilename=joinpath(MODULE_ROOT,\"meshfiles\",\"mesh_permeameter1_foursets.bdf\"); param=rtmsim.input_vals(1,meshfilename,200, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 1,2,2,2, 0,\"results.jld2\",0,0.01,16); rtmsim.rtmsim_rev1(param); for starting a simulation with different patches and race tracking\nMODULE_ROOT=splitdir(splitdir(pathof(rtmsim))[1])[1]; meshfilename=joinpath(MODULE_ROOT,\"meshfiles\",\"mesh_permeameter1_foursets.bdf\"); param=rtmsim.input_vals(1,meshfilename,200, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 1,2,2,2, 1,\"results.jld2\",0,0.01,16); rtmsim.rtmsim_rev1(param); for continuing the previous simulation   \n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.plot_results(resultsfilename)","category":"page"},{"location":"functions/#rtmsim.plot_results-Tuple{Any}","page":"Functions","title":"rtmsim.plot_results","text":"function plot_results(resultsfilename)\n\nCreate contour plots of the filling factor and the pressure after loading a results file.\n\nArguments:\n\nresultsfilename :: String\n\nUnit test: \n\nWORK_DIR=pwd(); resultsfilename=joinpath(WORK_DIR,\"results.jld2\"); rtmsim.plot_results(resultsfilename);\n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.plot_overview(n_out,n_pics)","category":"page"},{"location":"functions/#rtmsim.plot_overview-Tuple{Any, Any}","page":"Functions","title":"rtmsim.plot_overview","text":"function plot_overview(n_out,n_pics)\n\nCreate filling factor contour plots. n_out is the index of the last output file, if n_out==-1 the output file with the highest index is chosen. Consider the last n_pics for creating the contour plots at four equidistant time intervals, if n_pics==-1 all available output files are considered.\n\nArguments:\n\nn_out :: Int\nn_pics :: Int\n\nUnit test: \n\nrtmsim.plot_overview(-1,-1)\n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.plot_filling(n_out,n_pics)","category":"page"},{"location":"functions/#rtmsim.plot_filling-Tuple{Any, Any}","page":"Functions","title":"rtmsim.plot_filling","text":"function plot_filling(n_out,n_pics)\n\nCreate a window showing the filling factor contour plot at a selected time instance. Selection is with slider bar. n_out is the index of the last output file, if n_out==-1 the output file with the highest index is chosen. Consider the last n_pics for creating the contour plots at four equidistant time intervals, if n_pics==-1 all available output files are considered.\n\nArguments: \n\nn_out :: Int\nn_pics :: Int\n\nUnit test:\n\nrtmsim.plot_filling(-1,-1) \n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.gui()","category":"page"},{"location":"functions/#rtmsim.gui-Tuple{}","page":"Functions","title":"rtmsim.gui","text":"function gui()\n\nOpens the GUI.\n\nNo arguments.\n\nUnit test:\n\nrtmsim.gui(); to open the GUI.\n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.numerical_gradient(i_method,ind,p_old,cellneighboursarray,cellcentertocellcenterx,cellcentertocellcentery)","category":"page"},{"location":"functions/#rtmsim.numerical_gradient-NTuple{6, Any}","page":"Functions","title":"rtmsim.numerical_gradient","text":"function numerical_gradient(i_method,ind,p_old,cellneighboursarray,cellcentertocellcenterx,cellcentertocellcentery)\n\nCalculates the pressure gradient from the cell values of the neighbouring cells.\n\ni_method=1 .. Least square solution to determine gradient\ni_method=2 .. Least square solution to determine gradient with limiter\ni_method=3 .. RUntime optimized least square solution to determine gradient\n\nArguments:\n\ni_method :: Int\nind :: Int\np_old :: Vector{Float}\ncellneighoursarray :: Array{Float,2}\ncellcentertocellcenterx, cellcentertocellcentery :: Array{Float,2}\n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.numerical_flux_function(i_method,vars_P,vars_A,meshparameters)","category":"page"},{"location":"functions/#rtmsim.numerical_flux_function-NTuple{4, Any}","page":"Functions","title":"rtmsim.numerical_flux_function","text":"function numerical_flux_function(i_method,vars_P,vars_A,meshparameters)\n\nEvaluates the numerical flux functions at the cell boundaries.\n\ni_method==1 .. first order upwinding\n\nArguments:\n\ni_method :: Int\nvarsP, varsA :: 4-element Vector{Float}\nmeshparameters :: 3-element Vector{Float}\n\nUnit tests:\n\nrtmsim.numerical_flux_function(1,[1.0; 1.2; 0.0; 0.0],[1.0; 1.2; 0.0; 0.0],[1.0;0.0;1.0]) with return (1.2, 1.44, 0.0, 0.0, 1.2)\nrtmsim.numerical_flux_function(1,[1.225 1.2 0.4 0.9],[1.0 0.4 1.2 0.1],[1/sqrt(2);1/sqrt(2);1.0]) with return (1.2586500705120547, 1.5103800846144655, 0.5034600282048219, 1.0182337649086284, 1.131370849898476)\n\n\n\n\n\n","category":"method"},{"location":"functions/","page":"Functions","title":"Functions","text":"rtmsim.numerical_flux_function_boundary(i_method,vars_P,vars_A,meshparameters,n_dot_u)","category":"page"},{"location":"functions/#rtmsim.numerical_flux_function_boundary-NTuple{5, Any}","page":"Functions","title":"rtmsim.numerical_flux_function_boundary","text":"function numerical_flux_function_boundary(i_method,vars_P,vars_A,meshparameters,n_dot_u)\n\nEvaluates the numerical flux functions at the cell boundaries to pressure inlet or outlet.\n\ni_method==1 .. first order upwinding\n\nArguments:\n\ni_method :: Int\nvarsP, varsA :: 4-element Vector{Float}\nmeshparameters :: 3-element Vector{Float}\nndotu :: Float\n\nUnit tests:\n\nrtmsim.numerical_flux_function_boundary(1,[1.0; 1.2; 0.0; 0.0],[1.0; 1.2; 0.0; 0.0],[1.0;0.0;1.0],-1.0) with return (-1.0, -1.2, -0.0, -0.0, -1.0)\nrtmsim.numerical_flux_function_boundary(1,[1.225 1.2 0.4 0.9],[1.0 0.4 1.2 0.1],[1/sqrt(2);1/sqrt(2);1.0],-0.8) with return (-0.8900000000000001, -0.3560000000000001, -1.068, -0.08000000000000002, -0.8)\n\n\n\n\n\n","category":"method"},{"location":"functions/#Additional-features","page":"Functions","title":"Additional features","text":"","category":"section"},{"location":"functions/","page":"Functions","title":"Functions","text":"The source code is prepared for the following extensions:","category":"page"},{"location":"functions/","page":"Functions","title":"Functions","text":"Import mesh file in different format. Selection is based on the extension of the mesh file.\nInput parameter i_model (for iso-thermal RTM =1) is used for adding additional functionalities. E.g. adding temperature and degree-of-cure equations with variable resin viscosity or for VARI with variable porosity, permeability and cavity thickness.\nParameter i_method in the functions for numerical differentiation and flux functions can be used to implement different numerical schemes. E.g. gradient limiter or second-order upwinding.","category":"page"},{"location":"functions/","page":"Functions","title":"Functions","text":"If you are interested, please have a look at the contribution item in the community standards.","category":"page"},{"location":"functions/","page":"Functions","title":"Functions","text":"EditURL = \"https://github.com/obertscheiderfhwn/RTMsim/blob/main/docs/src/functions.md\"","category":"page"},{"location":"tutorials/#Tutorials","page":"Tutorials","title":"Tutorials","text":"","category":"section"},{"location":"tutorials/#Validation-and-verification-cases","page":"Tutorials","title":"Validation and verification cases","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Three different test cases are available, successfully validating the Julia implementation of the RTM filling model:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Validation of the software tool for radial flow with isotropic in-plane permeablity: The simulated flow front position after 200 s is compared with the calculated flow front position from literature.  \nVerification of the software tool for radial flow with tilted orthotropic in-plane permeablity: The simulated tilted elliptical flow front is analysed and the calculated orthotropic permeablity is compared with the simulation input.\nComparison of the simulated flow front position for a complex annulus filler-like part with the simulated flow front position from Ansys Fluent and comparison of the simulated filling pattern with results from a myRTM simulation.","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The validation and verification cases can be executed in the GUI with the buttons Run with input file and Plot overview or from the command line with ","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.start_rtmsim(\"inputfiles\\\\input_case1_coarsemesh.txt\") and rtmsim.plot_overview(-1,-1) on Windows and\nrtmsim.start_rtmsim(\"inputfiles/input_case1_coarsemesh.txt\") and rtmsim.plot_overview(-1,-1) on Linux.","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The input files for the validation cases are input_case1_coarsemesh.txt, input_case1_finemesh.txt, input_case2_coarsemesh.txt, input_case2_finemesh.txt, input_case3_coarsemesh.txt, input_case3_finemesh.txt. The input files are saved in directory inputfiles in the package folder. The appropriate file must be selected in GUI or in the function call.","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The following passages show and explain the simulation results (after rotating the views with LMB) for the test cases.","category":"page"},{"location":"tutorials/#V-and-V-case-1","page":"Tutorials","title":"V&V case 1","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Results for coarse and fine mesh of case 1 (Preform size 0.6 x 0.6 x 0.003 m^3, central injection gate with 0.02 m diameter, 35000 Pa injection pressure, dynamic viscosity 0.06 Pas, porosity 0.7, isotropic permeablity 3e-10 m^2):","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<img src=\"../assets/figures/validation_case1a.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<img src=\"../assets/figures/validation_case1b.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"According to an analytical estimation, the flow front after 50, 100, 150 and 200 s is a circle with radius 0.114, 0.150, 0.178 and 0.200 m. The values for the fine mesh agree well with the results from the analytical formula. The values for the coarse mesh show an error of <15% which decreases significantly in the course of time but the shape is no smooth circle.","category":"page"},{"location":"tutorials/#V-and-V-case-2","page":"Tutorials","title":"V&V case 2","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Results for coarse and fine mesh of case 2 (Preform size 0.6 x 0.6 x 0.003 m^3, central injection gate with 0.02 m diameter, 35000 Pa injection pressure, dynamic viscosity 0.06 Pas, porosity 0.70, permeability 3.0e-10 m^2 in first principal direction 30° to the horizontal and permeability 1.5e-10 m^2 in second principal direction):","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<img src=\"../assets/figures/validation_case2a.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<img src=\"../assets/figures/validation_case2b.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Analyzing the flow front after 200 s, the orthotropic permeability is described by 2.97e-10 m^2, 1.45e-10 m^2 and angle 35° for the fine mesh and 2.48e-10 m^2, 1.18e-10 m^2 and 35° for the coarse mesh. For the fine mesh (2198 cells for a domain with 600 × 600 mm), this reverse engineering shows very good agreement of the calculated orthotropic permeability  with the values used as simulation input. For the coarse mesh (588 cells) the agreement is still acceptable.","category":"page"},{"location":"tutorials/#V-and-V-case-3","page":"Tutorials","title":"V&V case 3","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Results for coarse and fine mesh of case 3 (Bounding box of part is 0.4 x 0.15 x 0.1 m^3, part thickness is 0.003 m^3, injection gate at on end of the part, 35000 Pa injection pressure, dynamic viscosity 0.06 Pas, porosity 0.7, isotropic permeablity 3e-10 m^2):","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<img src=\"../assets/figures/validation_case3a.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<img src=\"../assets/figures/validation_case3b.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"If the position of inlet and outlet ports is investigated, simulations with a coarse mesh and consequently reduced computational time is sufficient since the flow front progagation is predicted properly. The actual filling time can only be predicted with a fine mesh. A mesh refinement study must be performed. With the coarse mesh it takes approximately 50 s longer to reach the same filling state. If the predicted filling with the fine mesh is considered correct, the error with the coarse mesh is approximately 20%. This is in good agreement with the results from case 1 where domain size, coarse and fine mesh are similar and the permeability and injection values are the same. ","category":"page"},{"location":"tutorials/#Use-cases-Windows","page":"Tutorials","title":"Use cases - Windows","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The following three examples show typical use cases how RTMsim is used by engineers:","category":"page"},{"location":"tutorials/#Use-case-1","page":"Tutorials","title":"Use case 1","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"This examples shows how to start a simulation with the GUI. Click on Select meshfile and select the mesh file mesh_permeameter1_foursets.bdf from the meshfiles folder and set all other parameters as shown:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example1a.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"First, inspect the mesh file and plot the pre-defined sets:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example1d.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Set 1 is the pressure inlet, set 2 and set 3 are reinforcement patches with lower permeability and set 4 is a racetracking channel between the main preform and set 3 with same porosity but a factor 10 higher permeability than the main preform (racetracking with higher permeablity=higher flow speed takes place in thin regions between different patches or at the preform boundary). Then start the simulation and plot the filling overview after 200 s simulation time:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example1b.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Continue the simulation for another 100 s simulation time and plot the filling overview:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example1c.png\"><br>","category":"page"},{"location":"tutorials/#Use-case-2","page":"Tutorials","title":"Use case 2","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"This example shows how to use outlet ports. If outlet ports are defined, the outlet ports are connected to the catch pot (typically at ambient pressure or evacuated). If no outlet ports are defined, the hoses to the catch pot are clamped. The simulation is started with the following settings (mesh file is mesh_annulusfiller1_inletandoutlet.bdf):","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example2a.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The result plot shows the completely filled part with the grey inlet and outlet ports and the pressure contour:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example2b.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The filling overview is:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example2c.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The filling overview without pressure outlet (select Ignore radio button for the second set, Start simulation, Plot overview) shows only small differences at the very end of the filling:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example2e.png\"><br>","category":"page"},{"location":"tutorials/#Use-case-3","page":"Tutorials","title":"Use case 3","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"This example shows a workflow for selecting the inlet ports interactively. First, select the mesh file meshfiles\\\\mesh_annulusfiller1.bdf and plot the mesh to see the bounding box size of the part:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3a.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Specify the inlet port radius and press the Select inlet port button:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3b.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Rotate the view with the nodes with LMB and select an inlet port location with key p+LMB. After selection the node is highlighted:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3c.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Selection of multiple nodes is possible. Then close the graphics window and start the simulation with the settings shown above by clicking the Start interactive button. All radio buttons show ignore if only the interactively selected inlet is used. In general, sets defining different preform properties or additional inlet ports or outlet regions can also be used in interactive mode. Plot the filling overview:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3d.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"If cascade injection is planned (additional inlet port which is activated just after the flow front reached this location), select two inlet ports after clicking the button Select inlet port. The first one at the same location as before and the second one at the end of the current position of the flow front:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3e.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Close the graphics window and continue the simulation with the button Continue interactive. The filling and the final pressure contour are:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3f.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3g.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Without cascade injection, the degree of filling is significantly lower as shown in the subsequent figure for a filling time of 400 s.","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3h.png\"><br>","category":"page"},{"location":"tutorials/#Use-cases-Linux","page":"Tutorials","title":"Use cases - Linux","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Since the GUI for Linux is still under development, the steps of the presented use cases can be executed with the following list of commands in the Julia terminal.","category":"page"},{"location":"tutorials/#Use-case-1-2","page":"Tutorials","title":"Use case 1","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"This examples shows how to perform a simulation in the Julia terminal. First, inspect the mesh file and plot the pre-defined sets:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.plot_sets(\"meshfiles/mesh_permeameter1_foursets.bdf\") if file mesh_permeameter1_foursets.bdf is included in folder meshfiles in the working directory.","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example1d.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Set 1 is the pressure inlet, set 2 and set 3 are reinforcement patches with lower permeability and set 4 is a racetracking channel between the main preform and set 3 with same porosity but a factor 10 higher permeability than the main preform (racetracking with higher permeablity=higher flow speed takes place in thin regions between different patches or at the preform boundary). Then start the simulation and plot the filling overview after 200 s simulation time:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.rtmsim_rev1(1,\"meshfiles/mesh_permeameter1_foursets.bdf\",200, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 1,2,2,2,0,\"results.jld2\",0,0.01,16)\nrtmsim.plot_overview(-1,-1)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example1b.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Continue the simulation for another 100 s simulation time and plot the filling overview:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.rtmsim_rev1(1,\"meshfiles/mesh_permeameter1_foursets.bdf\",100, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 1,2,2,2,1,\"results.jld2\",0,0.01,16)\nrtmsim.plot_overview(-1,-1)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example1c.png\"><br>","category":"page"},{"location":"tutorials/#Use-case-2-2","page":"Tutorials","title":"Use case 2","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"This example shows how to use outlet ports. If outlet ports are defined, the outlet ports are connected to the catch pot (typically at ambient pressure or evacuated). If no outlet ports are defined, the hoses to the catch pot are clamped. The simulation is started with the following settings:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.rtmsim_rev1(1,\"meshfiles/mesh_annulusfiller1_inletandoutlet.bdf\",800, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 1,3,0,0, 0,\"results.jld2\",0,0.01,16)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The result plot shows the completely filled part with the grey inlet and outlet ports and the pressure contour are created:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.plot_results(\"results.jld2\")","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example2b.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The filling overview is created:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.plot_overview(-1,-1)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example2c.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The filling overview without pressure outlet is:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.rtmsim_rev1(1,\"meshfiles/mesh_annulusfiller1_inletandoutlet.bdf\",800, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 1,0,0,0, 0,\"results.jld2\",0,0.01,16)\nrtmsim.plot_overview(-1,-1)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example2e.png\"><br>","category":"page"},{"location":"tutorials/#Use-case-3-2","page":"Tutorials","title":"Use case 3","text":"","category":"section"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"This example shows a workflow for selecting the inlet ports interactively. First, plot the mesh to see the bounding box size of the part:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.plot_mesh(\"meshfiles/mesh_annulusfiller1.bdf\",1)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3a.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Select the inlet ports in a graphics window:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.plot_mesh(\"meshfiles/mesh_annulusfiller1.bdf\",2)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Rotate the view with the nodes with LMB and select an inlet port location with key p+LMB. After selection the node is highlighted:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3c.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Selection of multiple nodes is possible. Then close the graphics window and start the simulation with the following settings:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.rtmsim_rev1(1,\"meshfiles/mesh_annulusfiller1_inletandoutlet.bdf\",200, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 0,0,0,0, 0,\"results.jld2\",1,0.01,16)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Plot the filling overview:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.plot_overview(-1,-1)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3d.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"If cascade injection is planned (additional inlet port which is activated just after the flow front reached this location), select two inlet ports. The first one at the same location as before and the second one at the end of the current position of the flow front:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.plot_mesh(\"meshfiles/mesh_annulusfiller1.bdf\",2)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3e.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Close the graphics window and continue the simulation with the button Continue interactive. ","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.rtmsim_rev1(1,\"meshfiles/mesh_annulusfiller1_inletandoutlet.bdf\",200, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 0,0,0,0, 1,\"results.jld2\",1,0.01,16)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"The filling and the final pressure contour are:","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.plot_overview(-1,-1)","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3f.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"rtmsim.plot_results(\"results.jld2\")","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3g.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"Without cascade injection, the degree of filling is significantly lower as shown in the subsequent figure for a filling time of 400 s.","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"<br><img src=\"../assets/figures/example3h.png\"><br>","category":"page"},{"location":"tutorials/","page":"Tutorials","title":"Tutorials","text":"EditURL = \"https://github.com/obertscheiderfhwn/RTMsim/blob/main/docs/src/tutorials.md\"","category":"page"},{"location":"installation/#Installation","page":"Installation","title":"Installation","text":"","category":"section"},{"location":"installation/#How-to-get","page":"Installation","title":"How to get","text":"","category":"section"},{"location":"installation/#Requirements-and-installing-Julia","page":"Installation","title":"Requirements and installing Julia","text":"","category":"section"},{"location":"installation/","page":"Installation","title":"Installation","text":"The RTMsim module was developed and tested with Julia version 1.8. Julia is a high level open source programming language and it is as easy to use as python or Matlab. ","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"First of all you need a Julia installation.  Download Julia from https://julialang.org/downloads/ and install.","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"On a Windows operating systems add an environment variable such that the Julia terminal can be started from the command line.","category":"page"},{"location":"installation/#Installing-using-the-Julia-Package-manager","page":"Installation","title":"Installing using the Julia Package manager","text":"","category":"section"},{"location":"installation/","page":"Installation","title":"Installation","text":"Open a Julia terminal. The only thing you have to do is to add the package to your Julia environment with the following commands:","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"using Pkg\nPkg.add(url=\"https://github.com/obertscheiderfhwn/RTMsim\") for the current version  or Pkg.add(url=\"https://github.com/obertscheiderfhwn/RTMsim\",rev=\"1.0.4\") for the specific release 1.0.4 corresponding to the JOSS paper\nPkg.test(\"rtmsim\") for an automated test.","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Alternatively, one can use the package manager with the following commands:","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Change to package manager with ] \nadd \"https://github.com/obertscheiderfhwn/RTMsim\"\ntest rtmsim\nReturn with the backspace key","category":"page"},{"location":"installation/#How-to-use-Windows","page":"Installation","title":"How to use - Windows","text":"","category":"section"},{"location":"installation/#Preparation","page":"Installation","title":"Preparation","text":"","category":"section"},{"location":"installation/","page":"Installation","title":"Installation","text":"For testing the software create a directory and download mesh- and input-files:","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Create a working directory in the File explorer\nFigure out the location of the package with using rtmsim and afterwards pathof(rtmsim) in the Julia terminal\nCopy from the package location the folder with the meshfiles and the inputfiles into the working directory in the File explorer","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Start the GUI in the Julia terminal:","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Change to the working directory, for example with cd(\"C:\\\\obertscheiderfhwn\\\\rtmsim\") where the separation is a \\\\\nusing rtmsim\nStart the GUI with rtmsim.gui()","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Start the GUI by double clicking: ","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Copy start_rtmsim_gui.bat and start_rtmsim_gui.jl from the package folder to the working directory\nDouble click on start_rtmsim_gui.bat in the Explorer","category":"page"},{"location":"installation/#GUI","page":"Installation","title":"GUI","text":"","category":"section"},{"location":"installation/","page":"Installation","title":"Installation","text":"You can start a simulation in the GUI.  <br><img src=\"figures/rtmsim_help.png\"><br>","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"The buttons in the line on the RHS are used to start the simulation with the parameters from the selected input file. For example, click on Select input file and select the input.txt in the inputfiles folder (from the package installation or from the copy in your working directory) and click on Run with input file. After the simulation is completed, click on Plot overview.","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Parameters (fluid properties, patch types and patch properties of cell sets specified in the mesh file) can also be specified in the GUI and a simulation is then started by clicking on Start simulation. Also other functionalities are available. The buttons in the first line on the LHS are used for mesh inspection, i.e. Select mesh file, Plot mesh with bounding box and Plot sets for inspecting the defined sets in the mesh file. The buttons Start simulation and Continue simulation in the second line on the LHS are used for starting and continuing a filling simulation. Every time the Start or Continue simulation button is pressed, a filling simulation is started. The simulated flow time tmax is specified in the first field in the second line. Every simulation calculates the flow front propagation during the next tmax seconds. If started with the Start simulation button, the cavity is empty initially. If started with the Continue simulation button, the results from the previous simulation are taken as initial condition. With the buttons Start interactive and Continue interactive in the third line one can start and continue simulations where manually selected inlet ports are used in addition to sets defined below. The radius of the inlet ports is specified in the first field in the third line and the locations are selected with the mouse after clicking on Select inlet port. The buttons Plot results, Plot overviewand Plot filling in the forth line are used for creating contour plots, i.e. show filling and pressure distribution of a specified output file (path to the results file in the second cell and can be changed by clicking on Select results file; final results are saved in results.jld2), plot filling at four equidistant time instances and filling at different time instances which are selected with a slider bar. ","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Click here for additional information (for example the meaning of the parameters) and here for tutorials (with typical use cases). ","category":"page"},{"location":"installation/#How-to-use-Linux","page":"Installation","title":"How to use - Linux","text":"","category":"section"},{"location":"installation/","page":"Installation","title":"Installation","text":"The GUI for Linux operating systems is still experimental. RTMsim can be started from the Julia terminal.","category":"page"},{"location":"installation/#Preparation-2","page":"Installation","title":"Preparation","text":"","category":"section"},{"location":"installation/","page":"Installation","title":"Installation","text":"For testing the software create a directory and download mesh- and input-files:","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Create a working directory in the File explorer\nFigure out the location of the package with using rtmsim and afterwards pathof(rtmsim) in the Julia terminal\nCopy from the package location the folder with the meshfiles and the inputfiles into the working directory in the File explorer","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Run a simulation in the Julia terminal:","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"In the Julia terminal change to the working directory, for example with cd(\"/home/obertscheiderfhwn/rtmsim\")\nusing rtmsim\nStart a simulation with input file if you copied the inputfiles folder to your working directory: rtmsim.start_rtmsim(\"inputfiles/input.txt\") or\nStart a simulation by calling the solver with all arguments: rtmsim.rtmsim_rev1(1,\"meshfiles/mesh_permeameter1_foursets.bdf\",200, 101325,1.225,1.4,0.06, 1.35e5,1.00e5, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-10,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-11,1,1,0,0, 3e-3,0.7,3e-9,1,1,0,0, 1,2,2,2,0,\"results.jld2\",0,0.01,16)\nCreate contour plots of filling at different time instances: rtmsim.plot_overview(-1,-1)","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"Click here for a description of the parameters, click here for a description of the input file and here for tutorials (with typical use cases). ","category":"page"},{"location":"installation/","page":"Installation","title":"Installation","text":"EditURL = \"https://github.com/obertscheiderfhwn/RTMsim/blob/main/docs/src/installation.md\"","category":"page"},{"location":"#RTMsim","page":"RTMsim","title":"RTMsim","text":"","category":"section"},{"location":"","page":"RTMsim","title":"RTMsim","text":"RTMsim is a new software tool for RTM mould filling simulations.","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"<img src=\"assets/figures/overview.png\"><br>","category":"page"},{"location":"#Introduction","page":"RTMsim","title":"Introduction","text":"","category":"section"},{"location":"","page":"RTMsim","title":"RTMsim","text":"Resin Transfer Moulding (RTM) is a manufacturing process for producing thin-walled fiber reinforced polymer composites where dry fibers are placed inside a mould and resin is injected under pressure into the fibrous preform. During mould design, filling simulations can study different manufacturing concepts (i.e. placement of inlet ports and vents) to guarantee complete filling of the part and avoid air entrapment where flow fronts converge. ","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"In the past, numerous models have been implemented in different software packages to perform filling simulations for RTM. The used simulation packages can be divided into three groups: ","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"General purpose CFD software packages, such as ANSYS Fluent or the various OpenFOAM distributions, for example from OpenCFD or The OpenFOAM Foundation\nCommercially available software packages which are tailored for the simulation of the RTM process, such as PAM-RTM, RTM-Worx or LIMS\nEasy-to-use simulation tools such as myRTM","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"All packages describe the flow on a macroscopic level. The first group models the flow through the porous cavity using volume-averaged Navier-Stokes equations. The second group makes use of some assumptions and at first solves a Laplace equation for the pressure inside the region which is already filled and in a second step calculates the flow velocity field to propagate the flow front. It has been shown that the first and second group render very similar results. myRTM from the third group is easy-to-use and can predict the filling pattern properly but neither predict the filling time correctly nor consider non-isotropic preform permeability. Solving conservation laws for fluid flow as in the first group requires a volume mesh of the cavity and consequently the solution is more time-consuming. The second and third group can be solved on a shell mesh where the thickness of the cavity is a property of the cell (similar to porosity and permeability) and slip boundary conditions at the top and bottom walls of the cavity are assumed. ","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"Based on the analysis of existing software tools for RTM filling simulations the following functional requirements for a new software tool were derived:","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"The simulation model shall give correct results for filling pattern and filling time.\nThe simulation tool takes only composite-manufacturing related inputs and the simulation shall be robust independent of numerics-related input.\nThe simulation tool takes a shell model of the geometry as input and the location-dependent properties are assigned directly on the shell elements.\nNew functionalities can be implemented by either adding equations of the same type or modifying existing equations.","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"RTMsim is a new software tool for RTM filling simulations which fulfills these requirements: Several test cases were used for successfully validating the implemented model. The porous cavity is fully described by a mesh file with triangular cells on the part’s mid-surface and cell set definitions. The latter can be used for specifying the location of the pressure injection ports and regions with different preforms by assigning different thickness, porosity and permeability values. Additional equations (e.g. for modeling the degree-of-cure) can either be added with equations of the same type or modifications of existing equations (e.g. for variable cavity thickness as needed for vacuum assisted resin infusion simulations). ","category":"page"},{"location":"#Physical-model-and-implementation","page":"RTMsim","title":"Physical model and implementation","text":"","category":"section"},{"location":"","page":"RTMsim","title":"RTMsim","text":"Flow through a porous medium is described by a compressible continuity equation, an adiabatic equation of state and a momentum equation with dynamic viscosity of the resin in the Darcy term. In addition, a volume-of-fluid equation is solved to track the flow front but the calculated fluid fraction is not used to calculate a mean density:","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"<img src=\"assets/figures/theory_003.png\"><br>","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"The physical quantities in the governing equations are functions of space x and time t:","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"<img src=\"assets/figures/theory_004.png\"><br>","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"It is assumed that no cross-thickness flow takes place. Consequently, the fluid domain can be meshed with only one cell through the thickness or with a shell mesh on the mid-surface, see (a) and (b). The red inlet and optional outlet ports are also part of the mesh, see (c). ","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"<img src=\"assets/figures/theory_001.png\"><br>","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"In general, flow through curved cavity with junctions must be solved, see (a). The discretized versions of the continuum, momentum and volume-of-fluid equations are solved on the flattened geometry. The neighbouring cells are rotated about the common edge to lie in a plane, see (b) and (c).","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"<img src=\"assets/figures/theory_002.png\"><br>","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"Since the flow is described on the mid-surface, the velocity vector has only two non-zero components u and v described in a local coordinate system. The local coordinate system is the result of a projection of a reference vector. The reference vector is chosen such that the local x- and y-directions correspond with the first and second principal permeability directions. ","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"The four conservation laws for mass density, velocity components u and v in the local cell coordinate system and the fluid fraction describe the flow in the locally flattened geometry, see (a). A coordinate transformation for the velocity components must be performed for every neighbouring cell, see (b).","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"<img src=\"assets/figures/theory_005.png\"><br>","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"Discretization of the governing equations on an unstructured mesh follows the ideas presented here. For every cell, the numerical flux functions and source terms are evaluated in the flattended geometry and advanced in time.","category":"page"},{"location":"","page":"RTMsim","title":"RTMsim","text":"EditURL = \"https://github.com/obertscheiderfhwn/RTMsim/blob/main/docs/src/index.md\"","category":"page"},{"location":"parameters/#Input-parameters","page":"Input parameters","title":"Input parameters","text":"","category":"section"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"RTMsim is executed with a well-defined list of parameters specified in an input text file or in the GUI. The mesh file and all parameters must be specified in SI units.","category":"page"},{"location":"parameters/#GUI","page":"Input parameters","title":"GUI","text":"","category":"section"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"The following figure shows the GUI with explanation of the parameters.","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"<img src=../assets/figures/rtmsim_help.png>","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"The buttons in the line on the RHS are used to start the simulation with the parameters from the selected input file. For example, click on Select input file and select the input.txt in the inputfiles folder from the package installation and click on Run with input file. After the simulation is completed, click on Plot overview.","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"Parameters (fluid properties, patch types and patch properties of cell sets specified in the mesh file) can also be specified in the GUI and a simulation is then started by clicking on Start simulation. Also other functionalities are available. The buttons in the first line on the LHS are used for mesh inspection, i.e. Select mesh file, Plot mesh with bounding box and Plot sets for inspecting the defined sets in the mesh file. The buttons Start simulation and Continue simulation in the second line on the LHS are used for starting and continuing a filling simulation. Every time the Start or Continue simulation button is pressed, a filling simulation is started. The simulated flow time tmax is specified in the first field in the second line. Every simulation calculates the flow front propagation during the next tmax seconds. If started with the Start simulation button, the cavity is empty initially. If started with the Continue simulation button, the results from the previous simulation are taken as initial condition. With the buttons Start interactive and Continue interactive in the third line one can start and continue simulations where manually selected inlet ports are used in addition to sets defined below. The radius of the inlet ports is specified in the first field in the third line and the locations are selected with the mouse after clicking on Select inlet port. The buttons Plot results, Plot overviewand Plot filling in the forth line are used for creating contour plots, i.e. show filling and pressure distribution of a specified output file (path to the results file in the second cell and can be changed by clicking on Select results file; final results are saved in results.jld2), plot filling at four equidistant time instances and filling at different time instances which are selected with a slider bar. ","category":"page"},{"location":"parameters/#Input-file","page":"Input parameters","title":"Input file","text":"","category":"section"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"The complete set of input parameters can be accessed in the input file. The following paragraph shows an example for such an input file:","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"1    #i_model \r\nmeshfiles/mesh_permeameter1_foursets.bdf    #meshfilename \r\n200    #tmax \r\n1.01325e5 1.225 1.4 0.06    #p_ref rho_ref gamma mu_resin_val \r\n1.35e5 1.0e5    #p_a_val p_init_val \r\n3e-3 0.7 3e-10 1 1 0 0    #t_val porosity_val K_val alpha_val refdir1_val refdir2_val refdir3_val \r\n3e-3 0.7 3e-10 1 1 0 0    #t1_val porosity1_val K1_val alpha1_val refdir11_val refdir21_val refdir31_val \r\n3e-3 0.7 3e-10 1 1 0 0    #t2_val porosity2_val K2_val alpha2_val refdir12_val refdir22_val refdir32_val\r\n3e-3 0.7 3e-10 1 1 0 0    #t3_val porosity3_val K3_val alpha3_val refdir13_val refdir23_val refdir33_val\r\n3e-3 0.7 3e-10 1 1 0 0    #t4_val porosity4_val K4_val alpha4_val refdir14_val refdir24_val refdir34_val \r\n1 0 0 0    #patchtype1val patchtype2val patchtype3val patchtype4val \r\n0 results.jld2    #i_restart restartfilename\r\n0 0.01    #i_interactive r_p\r\n16    #n_pics","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"Meaning of the variables:","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"i_model: Identifier for physical model (Default value is 1)\nmeshfilename: Mesh filename.\ntmax: Maximum simulation time.\np_ref rho_ref gamma mu_resin_val: Parameters for the equation of state and dynamic viscosity of resin used in the Darcy term.\np_a_val p_init_val: Absolut pressure value for injection port and for initial cavity pressure.\nt_val porosity_val K_val alpha_val refdir1_val refdir2_val refdir3_val: Properties of the cells in the main preform: The vector (refdir1_val,refdir2_val,refdir3_val) is projected onto the cell in order to define the first principal cell direction. The second principal cell direction is perpendicular to the first one in the plane spanned by the cell nodes. The principal cell directions are used as the principal permeabilty directions. The cell properties are defined by the thickness t_val, the porosity porosity_val, the permeability K_val in the first principal cell direction, the permeablity alpha_val in the second principal direction.\nt1_val porosity1_val K1_val alpha1_val refdir11_val refdir21_val refdir31_val etc.: Properties for up to four additional cell regions if preform. \npatchtype1val patchtype2val patchtype3val patchtype4val: These regions are used to specify the location of the pressure boundary conditions and to specify regions with different permeability, porosity and thickness properties (e.g. for different part thickness and layup or for race tracking which are regions with very high permeability typically at the boundary of the preforms). Vents need not be specified. Parameters patchtype1val define the patch type. Numerical values 0, 1, 2 and 3 are allowed with the following interpretation:\n0 .. the patch is ignored\n1 .. the patch represents an inlet gate, where the specified injection pressure level applies\n2 .. the patch specifies a preform region\n3 .. the patch represents a vent, where the specified initial pressure level applies\ni_restart restartfilename: Start with new simulation if 0 or continue previous simulation if 1.\ni_interactive r_p: Select the inlet ports graphically if i_interactive equal to 1.\nn_pics: Number of intermediate output files. Supposed to be a multiple of 4.","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"Entries are separated by one blank.","category":"page"},{"location":"parameters/#Mesh-file","page":"Input parameters","title":"Mesh file","text":"","category":"section"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"The new simulation tool does not include mesh generation. A 3-node triangular shell mesh with the pre-defined regions must be generated with a meshing tool before starting the filling simulation. The authors used Altair HyperWorks but also free software tools such as SALOME-MECA, GMSH or NETGEN can be used.","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"The shell mesh is created on the part's mid-surface. Mid-surface models are often available in composite manufacturing since computational stress analysis for thin-walled parts is performed on the part’s mid-surface too. ","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"The prepared shell mesh is imported via a text file where nodes, elements and element sets are described in a format similar to the NASTRAN bulk data format. Every line (except for the set definitions) contains ten fields of eight characters each. The first field contains the name of the item. The following paragraph shows an example for such a mesh file:","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"SET 1 = 1,2,3,4,5,6,\r\n        7,8,9,10,11,12,\r\n        13,14,15,16\r\nGRID           1             0.0     0.0     0.0\r\nGRID           3             0.3     0.3     0.0\r\nGRID           4            -0.3     0.3     0.0\r\n[...]\r\nGRID         331        -2.115-2-.113318     0.0\r\nGRID         332        -.117148.1562872     0.0\r\nGRID         333        .2271322.1925105     0.0\r\nCTRIA3         1       0      15       9      16\r\nCTRIA3         2       0      16      10      19\r\nCTRIA3         3       0      19      11      17\r\n[...]\r\nCTRIA3       586       0     243     302     332\r\nCTRIA3       587       0     262     333     259\r\nCTRIA3       588       0     232     259     333","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"Nodes are described by the keyword GRID, followed by a grid number, followed by a blank and three fields with the x, y and z coordinates of the node. The triangular cells are defined by the keyword CTRIA3, followed by a cell number, followed by a zero, followed by the three node numbers which constitute the cell. Nodes and cells need not be sorted nor starting with one. Cell sets are defined by the keyword SET followed by N = and the cell numbers separated by commas. Not more than 6 cell numbers per line. Then continue with the cell numbers in the line below after 8 blanks at the beginning of the line. Up to four sets can be defined. ","category":"page"},{"location":"parameters/","page":"Input parameters","title":"Input parameters","text":"EditURL = \"https://github.com/obertscheiderfhwn/RTMsim/blob/main/docs/src/parameters.md\"","category":"page"}]
}
